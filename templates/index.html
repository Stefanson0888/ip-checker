<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>IP Checker</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 30px; }
        .flag { margin-top: 10px; }
        #map { height: 400px; width: 80%; margin: 0 auto; margin-top: 20px; }
        .section { margin-top: 20px; }
        .button-toggle {
            background-color: #007BFF; color: white;
            padding: 10px 20px; border: none;
            border-radius: 5px; cursor: pointer;
            font-size: 16px;
        }
        .button-toggle:hover {
            background-color: #0056b3;
        }
        .hidden { display: none; }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
</head>
<body>
    <h1>Твоя IP-адреса: {{ ip }}</h1>

    <div class="section">
        <p><strong>Місто:</strong> {{ city }}</p>
        <p><strong>Регіон:</strong> {{ region }}</p>
        <p><strong>Країна:</strong> {{ country }}</p>
        {% if flag_url %}
            <img src="{{ flag_url }}" alt="Country flag" width="100" class="flag">
        {% endif %}
    </div>

    {% if latitude and longitude %}
        <div id="map"></div>
        <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
        <script>
            var map = L.map('map').setView([{{ latitude }}, {{ longitude }}], 10);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);
            L.marker([{{ latitude }}, {{ longitude }}]).addTo(map)
                .bindPopup("Ти тут!")
                .openPopup();
        </script>
    {% endif %}

    <div class="section">
        <p><strong>Операційна система:</strong> {{ os }}</p>
        <p><strong>Браузер:</strong> {{ browser }}</p>
        <p><strong>User-Agent:</strong> {{ user_agent }}</p>
    </div>

    <div class="section">
        <p><strong>Проксі:</strong> {{ 'Так' if is_proxy else 'Ні' }}</p>
        <p><strong>VPN:</strong> {{ 'Так' if is_vpn else 'Ні' }}</p>
        <p><strong>Tor:</strong> {{ 'Так' if is_tor else 'Ні' }}</p>
    </div>

    <div class="section">
        <button class="button-toggle" onclick="toggleExtra()">Показати додаткову інформацію</button>
        <div id="extra-info" class="hidden">
            <p><strong>Часовий пояс:</strong> {{ timezone }}</p>
            <p><strong>Телефонний код:</strong> {{ calling_code }}</p>
            <p><strong>Поштовий індекс:</strong> {{ postal }}</p>
            <p><strong>Мова:</strong> {{ language }}</p>
            <p><strong>Валюта:</strong> {{ currency }}</p>
            <p><strong>Провайдер (ISP):</strong> {{ isp }}</p>
            <p><strong>ASN:</strong> {{ asn }}</p>
            <p><strong>Hostname:</strong> {{ hostname }}</p>
        </div>
    </div>

    <script>
        function toggleExtra() {
            const block = document.getElementById('extra-info');
            const isHidden = block.classList.contains('hidden');
            block.classList.toggle('hidden');
            event.target.textContent = isHidden ? 'Сховати додаткову інформацію' : 'Показати додаткову інформацію';
        }
    </script>
</body>
</html>
