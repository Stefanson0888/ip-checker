<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>IP Checker</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        .flag { margin-top: 20px; }
        #map { height: 400px; width: 80%; margin: 0 auto; margin-top: 20px; }
    </style>
    <!-- Підключення Leaflet для карти -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
</head>
<body>
    <h1>Твоя IP-адреса: {{ ip }}</h1>
    <p><strong>Тип IP:</strong> {{ ip_type }}</p>
    <p><strong>Місто:</strong> {{ city }}</p>
    <p><strong>Регіон:</strong> {{ region }}</p>
    <p><strong>Країна:</strong> {{ country }}</p>

    {% if flag_url %}
        <img src="{{ flag_url }}" alt="Country flag" width="100">
    {% else %}
        <p>Прапор не знайдено</p>
    {% endif %}

    <hr style="margin: 30px 0;">

    <p><strong>Інтернет-провайдер (ISP):</strong> {{ isp }}</p>
    <p><strong>ASN:</strong> {{ asn }}</p>
    <p><strong>Організація:</strong> {{ org }}</p>
    <p><strong>User-Agent:</strong> {{ user_agent }}</p>

    {% if latitude and longitude %}
        <div id="map"></div>
        <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
        <script>
            var map = L.map('map').setView([{{ latitude }}, {{ longitude }}], 10);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);
            L.marker([{{ latitude }}, {{ longitude }}]).addTo(map)
                .bindPopup("Ти тут!")
                .openPopup();
        </script>
    {% endif %}
</body>
</html>
