<!DOCTYPE html>
<html lang="{{ lang }}" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ _('vpn_detection_title') }}</title>
    <meta name="description" content="{{ _('vpn_detection_description') }}">
    <meta name="keywords" content="am i using vpn, vpn detector, check vpn status, vpn detection tool, proxy checker, tor detector, vpn test, is my vpn working">
    <meta name="author" content="IP Checker Service">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

    <!-- Canonical and hreflang for SEO -->
    <link rel="canonical" href="{{ base_url }}{{ current_path }}">
    {% for hreflang_lang, hreflang_url in hreflang_urls.items() %}
    <link rel="alternate" hreflang="{{ hreflang_lang }}" href="{{ hreflang_url }}/am-i-using-vpn">
    {% endfor %}
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ _('vpn_detection_title') }}">
    <meta property="og:description" content="{{ _('vpn_detection_description') }}">
    <meta property="og:url" content="{{ base_url }}{{ current_path }}">
    <meta property="og:image" content="{{ base_url }}/static/images/vpn-detection-preview.jpg">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ _('vpn_detection_title') }}">
    <meta name="twitter:description" content="{{ _('vpn_detection_description') }}">
    <meta name="twitter:image" content="{{ base_url }}/static/images/vpn-detection-preview.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ base_url }}/static/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ base_url }}/static/apple-touch-icon.png">
    
    {% if gtm_id %}
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','{{ gtm_id }}');</script>
    <!-- End Google Tag Manager -->
    {% endif %}

    <link rel="stylesheet" href="{{ url_for('static', filename='css/dropdown.css') }}">
    
    <!-- SCHEMA MARKUP -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@graph": [
            {
            "@type": "WebApplication",
            "name": "VPN Detection Tool",
            "description": "Free online tool to detect if you're using VPN, proxy, or Tor connection with instant results",
            "url": "{{ base_url }}/am-i-using-vpn",
            "applicationCategory": "SecurityApplication",
            "operatingSystem": "Any",
            "offers": {
                "@type": "Offer",
                "price": "0",
                "priceCurrency": "USD"
            },
            "provider": {
                "@type": "Organization",
                "name": "IP Checker Service",
                "url": "{{ base_url }}"
            }
            },
            {
            "@type": "FAQPage",
            "mainEntity": [
                {
                "@type": "Question",
                "name": "How does VPN detection work?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "VPN detection analyzes your IP address against known VPN server ranges, checks for proxy headers, and examines network characteristics to determine if you're using a VPN or proxy service."
                }
                },
                {
                "@type": "Question",
                "name": "Can websites always detect VPN usage?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Not always. While many VPNs can be detected, some premium services use techniques to avoid detection. Detection accuracy varies depending on the VPN service and detection methods used."
                }
                },
                {
                "@type": "Question",
                "name": "Is using a VPN legal?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "VPN usage is legal in most countries and is commonly used for privacy, security, and accessing geo-restricted content. However, some countries have restrictions on VPN usage."
                }
                }
            ]
            },
            {
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "{{ base_url }}"
                },
                {
                "@type": "ListItem",
                "position": 2,
                "name": "VPN Detection",
                "item": "{{ base_url }}/am-i-using-vpn"
                }
            ]
            }
        ]
    }
    </script>


    <script>
    // Global dataLayer initialization  
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
        'event': 'page_view',
        'event_category': 'seo_landing',
        'event_label': 'vpn_detection',
        'language': '{{ lang }}',
        'vpn_status': '{% if is_vpn %}detected{% else %}not_detected{% endif %}',
        'user_ip': '{{ user_ip }}',
        'user_location': '{{ user_location }}'
    });
    </script>


    <!-- CSS -->
    <style> 
        body { 
            background-color: #111827; 
            color: white; 
            font-family: system-ui, -apple-system, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        .container { 
            max-width: 1024px; 
            margin: 0 auto; 
            padding: 2rem 1rem; 
        }
        .card { 
            background-color: #1f2937; 
            border-radius: 0.5rem; 
            padding: 1.5rem; 
            margin-bottom: 2rem; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        .grid { 
            display: grid; 
            gap: 1.5rem; 
        }
        @media (min-width: 768px) { 
            .grid-md-2 { grid-template-columns: 1fr 1fr; } 
        }
        .text-center { text-align: center; }
        .text-blue { color: #60a5fa; }
        .text-green { color: #34d399; }
        .text-yellow { color: #fbbf24; }
        .text-gray { color: #9ca3af; }
        .bg-blue { background: linear-gradient(135deg, #2563eb, #1e40af); }
        .bg-green { background: linear-gradient(135deg, #059669, #047857); }
        .btn { 
            display: inline-block; 
            padding: 0.75rem 1.5rem; 
            border-radius: 0.5rem; 
            text-decoration: none; 
            font-weight: 600;
            background: white;
            color: #1f2937;
            transition: all 0.2s;
        }
        .btn:hover { background: #f3f4f6; }
        .emoji { font-size: 4rem; margin-bottom: 1rem; }
        .flex { display: flex; justify-content: space-between; align-items: center; }
        .space-y > * + * { margin-top: 0.75rem; }
        h1 { font-size: 2.5rem; font-weight: bold; margin-bottom: 1rem; }
        h2 { font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; }
        h3 { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem; }
        select { 
            background: #374151; 
            color: white; 
            border: 1px solid #4b5563; 
            border-radius: 0.25rem; 
            padding: 0.5rem; 
        }
        .back-link { color: #60a5fa; text-decoration: none; }
        .back-link:hover { color: #93c5fd; }
        .status-box { 
            padding: 1rem; 
            border-radius: 0.5rem; 
            margin-top: 1rem; 
        }
        .status-secure { background-color: #064e3b; color: #6ee7b7; }
        .status-exposed { background-color: #92400e; color: #fcd34d; }
     
        .language-dropdown {
            position: relative;
            display: inline-block;
        }

        .language-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #374151;
            border: 1px solid #4b5563;
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #d1d5db;
            transition: all 0.2s;
        }
    </style>
</head>
<>
    <!-- Simple GTM noscript for tracking -->
    <noscript><iframe src="https://www.googletagmanager.com/gtm.ns.html?id=GTM-WN4J2JQW"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <div class="container">
        <!-- Header with Navigation -->
        <header class="text-center" style="margin-bottom: 2rem;">
            <div class="flex" style="margin-bottom: 1.5rem;">
                <a href="{{ language_urls[lang] if lang != 'en' else '/' }}" class="back-link">
                    ‚Üê {{ _('back_to_home') }}
                </a>
                
                <!-- Language Selector -->
                <div class="language-dropdown" id="languageDropdown">
                    {% include 'partials/language_dropdown.html' %}
                </div>
            </div>

            <h1 class="text-blue">{{ _('vpn_detection_h1') }}</h1>
            <p class="text-gray">{{ _('vpn_detection_subtitle') }}</p>
        </header>

        <nav style="background: #374151; padding: 15px 0; margin-bottom: 2rem;">
            <div class="container">
                <a href="{{ language_urls[lang] if lang != 'en' else '/' }}" style="color: #9ca3af; text-decoration: none;">Home</a>
                <span style="margin: 0 10px; color: #9ca3af;">‚Ä∫</span>
                <span style="color: #d1d5db; font-weight: 500;">VPN Detection</span>
            </div>
        </nav>

        <div style="background: #1f2937; padding: 30px; border-radius: 10px; margin: 2rem 0;">
            <p style="font-size: 1.2rem; text-align: center; margin-bottom: 20px; color: #d1d5db;">
                <strong>Am I using VPN?</strong> Our free VPN detection tool instantly analyzes your connection to determine if you're behind a <strong>VPN, proxy, or Tor network</strong>. Whether you want to <strong>check if your VPN is working</strong> or verify your privacy protection, our tool provides accurate results with detailed analysis of your network connection.
            </p>
            
            <div style="background: #374151; padding: 20px; border-radius: 8px; margin-top: 20px;">
                <h3 style="color: #60a5fa; margin-bottom: 15px;">üîç Why Use VPN Detection?</h3>
                <p style="color: #d1d5db; margin-bottom: 10px;">VPN detection is important for:</p>
                <ul style="list-style: none; padding: 0; color: #d1d5db;">
                    <li style="margin: 8px 0;">‚úì <strong>Privacy verification</strong> - Confirm your VPN is masking your real IP</li>
                    <li style="margin: 8px 0;">‚úì <strong>Security testing</strong> - Check if your connection is properly encrypted</li>
                    <li style="margin: 8px 0;">‚úì <strong>Access troubleshooting</strong> - Understand why some sites block your connection</li>
                    <li style="margin: 8px 0;">‚úì <strong>Compliance checking</strong> - Verify connection type for specific requirements</li>
                </ul>
            </div>
        </div>

        <!-- VPN Detection Results -->
        <div class="card">
            <div class="grid grid-md-2">
                <!-- Main Result -->
                <div class="text-center">
                    {% if is_vpn %}
                    <div class="emoji">üõ°Ô∏è</div>
                    <h2 class="text-green">{{ _('vpn_detected') }}</h2>
                    <p class="text-gray">{{ _('connection_secure') }}</p>
                    <div class="status-box status-secure">
                        <p>‚úÖ {{ _('your_vpn_working') }}</p>
                        <p style="font-size: 0.875rem; margin-top: 0.5rem;">{{ _('consider_upgrade') }}</p>
                    </div>
                    {% else %}
                    <div class="emoji">üåê</div>
                    <h2 class="text-yellow">{{ _('vpn_not_detected') }}</h2>
                    <p class="text-gray">{{ _('connection_exposed') }}</p>
                    <div class="status-box status-exposed">
                        <p>‚ö†Ô∏è {{ _('recommend_vpn') }}</p>
                    </div>
                    {% endif %}
                </div>
                
                <!-- Technical Details -->
                <div class="space-y">
                    <h3>Technical Details</h3>
                    <div class="space-y">
                        <div class="flex">
                            <span class="text-gray">{{ _('your_ip') }}:</span>
                            <span style="font-family: monospace;">{{ user_ip }}</span>
                        </div>
                        <div class="flex">
                            <span class="text-gray">{{ _('connection_type') }}:</span>
                            <span>{% if is_vpn %}VPN/Proxy{% else %}Direct{% endif %}</span>
                        </div>
                        <div class="flex">
                            <span class="text-gray">{{ _('location') }}:</span>
                            <span>{{ user_location }}</span>
                        </div>
                        <div class="flex">
                            <span class="text-gray">{{ _('isp') }}:</span>
                            <span>{{ user_isp }}</span>
                        </div>
                        <div class="flex">
                            <span class="text-gray">{{ _('security_level') }}:</span>
                            <span class="{% if is_vpn %}text-green{% else %}text-yellow{% endif %}">
                                {% if is_vpn %}High{% else %}Medium{% endif %}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VPN Recommendations Section -->
        <div class="card">
            <h2 class="text-center">{{ _('best_vpn_services') }}</h2>
            
            <div class="grid grid-md-2">
                <!-- NordVPN Card -->
                <div class="text-center bg-blue" style="padding: 1.5rem; border-radius: 0.5rem;">
                    <div class="emoji">üõ°Ô∏è</div>
                    <h3>{{ _('nordvpn_title') }}</h3>
                    <p style="font-size: 0.875rem; margin-bottom: 1rem; opacity: 0.9;">{{ _('nordvpn_features') }}</p>
                    <a href="{{ nordvpn_url }}" 
                       target="_blank" 
                       rel="noopener"
                       class="btn">
                        {{ _('get_nordvpn') }}
                    </a>
                </div>
                
                <!-- NordPass Card -->
                <div class="text-center bg-green" style="padding: 1.5rem; border-radius: 0.5rem;">
                    <div class="emoji">üîë</div>
                    <h3>{{ _('nordpass_title') }}</h3>
                    <p style="font-size: 0.875rem; margin-bottom: 1rem; opacity: 0.9;">{{ _('nordpass_features') }}</p>
                    <a href="{{ nordpass_url }}" 
                       target="_blank" 
                       rel="noopener"
                       class="btn">
                        {{ _('get_nordpass') }}
                    </a>
                </div>
            </div>
        </div>

        <!-- Internal Links Section -->
        <section style="background: #1f2937; padding: 2rem; border-radius: 0.5rem; margin-top: 2rem;">
            <h2 style="text-align: center; margin-bottom: 2rem;">Related Privacy Tools</h2>
            <div class="grid grid-md-2" style="gap: 20px;">
                <a href="{% if lang != 'en' %}/{{ lang }}{% endif %}/what-is-my-ip" 
                   style="background: #374151; padding: 20px; border-radius: 10px; text-decoration: none; color: white; display: flex; align-items: center;">
                    <span style="font-size: 2rem; margin-right: 1rem;">üåê</span>
                    <div>
                        <h3 style="color: #60a5fa; margin-bottom: 5px;">What Is My IP</h3>
                        <p style="font-size: 0.875rem; color: #9ca3af; margin: 0;">Find your public IP address and location details</p>
                    </div>
                </a>
                <a href="{% if lang != 'en' %}/{{ lang }}{% endif %}/ip-lookup-tool" 
                   style="background: #374151; padding: 20px; border-radius: 10px; text-decoration: none; color: white; display: flex; align-items: center;">
                    <span style="font-size: 2rem; margin-right: 1rem;">üîç</span>
                    <div>
                        <h3 style="color: #60a5fa; margin-bottom: 5px;">IP Lookup</h3>
                        <p style="font-size: 0.875rem; color: #9ca3af; margin: 0;">Analyze any IP address for detailed information</p>
                    </div>
                </a>
                <a href="{{ language_urls[lang] if lang != 'en' else '/' }}" 
                   style="background: #374151; padding: 20px; border-radius: 10px; text-decoration: none; color: white; display: flex; align-items: center;">
                    <span style="font-size: 2rem; margin-right: 1rem;">üìç</span>
                    <div>
                        <h3 style="color: #60a5fa; margin-bottom: 5px;">IP Tools</h3>
                        <p style="font-size: 0.875rem; color: #9ca3af; margin: 0;">Complete suite of IP analysis tools</p>
                    </div>
                </a>
            </div>
        </section>
    </div>

    <script src="{{ url_for('static', filename='js/dropdown.js') }}"></script>
</body>
</html>